{"version":3,"file":"4695.renderer.js","mappings":"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","sources":["webpack://magic-tools/./src/renderer/App/GPSConvert/lib.ts"],"sourcesContent":["const DEFAULT_TYPE = 'gps-convert:default-type';\r\n\r\n// 获取默认显示的 App\r\nexport function getDefaultType() :string  {\r\n    const type = localStorage.getItem(DEFAULT_TYPE);\r\n    // 如果没有设置默认展示的应用，默认显示应用中心\r\n    return (type === null)? \"GCJ02\" : type;\r\n}\r\n\r\n// 设置默认显示的应用\r\nexport function setDefaultType(type: string) : void  {\r\n    localStorage.setItem(DEFAULT_TYPE,type);\r\n}\r\n\r\n\r\nexport type GPSPoint = {\r\n  lng :number,\r\n  lat :number\r\n};\r\n\r\nexport const pointToString = (point :GPSPoint):string => {\r\n  return `${point.lng},${point.lat}`;\r\n}\r\n\r\n// 腾讯地图 维度在前\r\nexport const tencentMapPointToString = (point :GPSPoint):string => {\r\n  return `${point.lat},${point.lng}`;\r\n}\r\n\r\n// 百度坐标 转 火星坐标\r\nconst x_pi=3.14159265358979324 * 3000.0 / 180.0;\r\nexport const bd09Togcj02 = (baidu_point :GPSPoint) :GPSPoint => {\r\n  let mars_point = { lng: 0, lat: 0 };\r\n  let x = baidu_point.lng - 0.0065;\r\n  let y = baidu_point.lat - 0.006;\r\n  let z = Math.sqrt(x*x+y*y)- 0.00002 * Math.sin(y * x_pi);\r\n  let theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * x_pi);\r\n  mars_point.lng = z * Math.cos(theta);\r\n  mars_point.lat = z * Math.sin(theta);\r\n  return mars_point;\r\n}\r\n\r\n// 火星坐标 转 百度坐标\r\nexport const gcj02Tobd09 = (mars_point :GPSPoint) :GPSPoint =>  {\r\n  let baidu_point={ lng: 0,lat: 0 };\r\n  let x = mars_point.lng;\r\n  let y = mars_point.lat;\r\n  let z = Math.sqrt(x * x + y * y) + 0.00002 * Math.sin(y * x_pi);\r\n  let theta = Math.atan2(y, x) + 0.000003 * Math.cos(x * x_pi);\r\n  baidu_point.lng = z * Math.cos(theta) + 0.0065;\r\n  baidu_point.lat = z * Math.sin(theta) + 0.006;\r\n  return baidu_point;\r\n}\r\n\r\nconst pi = 3.14159265358979324;\r\nconst a = 6378245.0; // 卫星椭球坐标投影到平面地图坐标系的投影因子\r\nconst ee = 0.00669342162296594323; // 椭球的偏心率\r\n\r\n// 判断是否在国内，不在国内则不做偏移\r\nexport const outOfChina = (lng :number, lat :number) :boolean => {\r\n  return ((lng < 72.004 || lng > 137.8347) && (lat < 0.8293 || lat > 55.8271));\r\n}\r\n\r\nconst transformLat = (x :number,y :number) :number => {\r\n  let ret = -100.0 + 2.0 * x + 3.0 * y + 0.2 * y * y + 0.1 * x * y + 0.2 * Math.sqrt(Math.abs(x));\r\n  ret += (20.0 * Math.sin(6.0 * x * pi) + 20.0 * Math.sin(2.0 * x * pi)) * 2.0 / 3.0;\r\n  ret += (20.0 * Math.sin(y * pi) + 40.0 * Math.sin(y / 3.0 * pi)) * 2.0 / 3.0;\r\n  ret += (160.0 * Math.sin(y / 12.0 * pi) + 320 * Math.sin(y * pi / 30.0)) * 2.0 / 3.0;\r\n  return ret;\r\n}\r\n\r\nconst transformLng = (x :number,y :number) :number => {\r\n  let ret = 300.0 + x + 2.0 * y + 0.1 * x * x + 0.1 * x * y + 0.1 * Math.sqrt(Math.abs(x));\r\n  ret += (20.0 * Math.sin(6.0 * x * pi) + 20.0 * Math.sin(2.0 * x * pi)) * 2.0 / 3.0;\r\n  ret += (20.0 * Math.sin(x * pi) + 40.0 * Math.sin(x / 3.0 * pi)) * 2.0 / 3.0;\r\n  ret += (150.0 * Math.sin(x / 12.0 * pi) + 300.0 * Math.sin(x / 30.0 * pi)) * 2.0 / 3.0;\r\n  return ret;\r\n}\r\n\r\n// WGS84 转 火星坐标\r\nexport const wgs84Togcj02 = (wgs84_point :GPSPoint) :GPSPoint => {\r\n  var mars_point={ lng: 0, lat: 0};\r\n  if (outOfChina(wgs84_point.lng, wgs84_point.lat)) {\r\n    return wgs84_point;\r\n  }\r\n  let x = wgs84_point.lng - 105.0;\r\n  let y = wgs84_point.lat - 35.0\r\n  let dLat = transformLat(x,y);\r\n  let dLng = transformLng(x,y);\r\n  let radLat = wgs84_point.lat / 180.0 * pi;\r\n  let magic = Math.sin(radLat);\r\n  magic = 1 - ee * magic * magic;\r\n  let sqrtMagic = Math.sqrt(magic);\r\n  dLat = (dLat * 180.0) / ((a * (1 - ee)) / (magic * sqrtMagic) * pi);\r\n  dLng = (dLng * 180.0) / (a / sqrtMagic * Math.cos(radLat) * pi);\r\n  mars_point.lat = wgs84_point.lat + dLat;\r\n  mars_point.lng = wgs84_point.lng + dLng;\r\n  return mars_point\r\n}\r\n\r\n// 火星坐标 转 WGS84\r\nexport const gcj02Towgs84 = (mars_point :GPSPoint) :GPSPoint => {\r\n  let x = mars_point.lng - 105.0;\r\n  let y = mars_point.lat - 35.0\r\n  let dLat = transformLat(x, y)\r\n  let dLng = transformLng(x, y)\r\n  let radLat = mars_point.lat / 180.0 * pi\r\n  let magic = Math.sin(radLat)\r\n  magic = 1 - ee * magic * magic\r\n  let sqrtMagic = Math.sqrt(magic)\r\n  dLat = (dLat * 180.0) / ((a * (1 - ee)) / (magic * sqrtMagic) * pi)\r\n  dLng = (dLng * 180.0) / (a / sqrtMagic * Math.cos(radLat) * pi)\r\n\r\n  return {\r\n    'lat': mars_point.lat - dLat,\r\n    'lng': mars_point.lng - dLng\r\n  }\r\n}\r\n"],"names":["DEFAULT_TYPE","getDefaultType","type","localStorage","getItem","setDefaultType","setItem","pointToString","point","lng","lat","tencentMapPointToString","x_pi","bd09Togcj02","baidu_point","mars_point","x","y","z","Math","sqrt","sin","theta","atan2","cos","gcj02Tobd09","pi","a","ee","outOfChina","transformLat","ret","abs","transformLng","wgs84Togcj02","wgs84_point","dLat","dLng","radLat","magic","sqrtMagic","gcj02Towgs84"],"sourceRoot":""}